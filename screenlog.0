executor.py [LINE:362] #INFO     [2021-08-27 15:07:39,703]  Bot: Kings of Empires [@AgeWarsBot]
executor.py [LINE:358] #WARNING  [2021-08-27 15:07:40,870]  Updates were skipped successfully.
dispatcher.py [LINE:360] #INFO     [2021-08-27 15:07:40,904]  Start polling.
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:13:56,189]  Task exception was never retrieved
future: <Task finished name='Task-316' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=RetryAfter('Flood control exceeded. Retry in 9 seconds.')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 78, in citizens_menu_handler
    await edit_msg.edit_reply_markup(keyboard)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2712, in edit_reply_markup
    return await self.bot.edit_message_reply_markup(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2541, in edit_message_reply_markup
    result = await self.request(api.Methods.EDIT_MESSAGE_REPLY_MARKUP, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 111, in check_result
    raise exceptions.RetryAfter(parameters.retry_after)
aiogram.utils.exceptions.RetryAfter: Flood control exceeded. Retry in 9 seconds.
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:14:05,645]  Task exception was never retrieved
future: <Task finished name='Task-324' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=MessageNotModified('Message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 106, in citizens_menu_handler
    edit_msg = await edit_msg.edit_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2616, in edit_text
    return await self.bot.edit_message_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2411, in edit_message_text
    result = await self.request(api.Methods.EDIT_MESSAGE_TEXT, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 115, in check_result
    exceptions.BadRequest.detect(description)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/utils/exceptions.py", line 140, in detect
    raise err(cls.text or description)
aiogram.utils.exceptions.MessageNotModified: Message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:14:05,672]  Task exception was never retrieved
future: <Task finished name='Task-329' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=MessageNotModified('Message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 106, in citizens_menu_handler
    edit_msg = await edit_msg.edit_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2616, in edit_text
    return await self.bot.edit_message_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2411, in edit_message_text
    result = await self.request(api.Methods.EDIT_MESSAGE_TEXT, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 115, in check_result
    exceptions.BadRequest.detect(description)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/utils/exceptions.py", line 140, in detect
    raise err(cls.text or description)
aiogram.utils.exceptions.MessageNotModified: Message is not modified: specified new message content and reply markup are exactly the same as a current content and reply markup of the message
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:14:47,114]  Task exception was never retrieved
future: <Task finished name='Task-436' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=RetryAfter('Flood control exceeded. Retry in 18 seconds.')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 78, in citizens_menu_handler
    await edit_msg.edit_reply_markup(keyboard)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2712, in edit_reply_markup
    return await self.bot.edit_message_reply_markup(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2541, in edit_message_reply_markup
    result = await self.request(api.Methods.EDIT_MESSAGE_REPLY_MARKUP, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 111, in check_result
    raise exceptions.RetryAfter(parameters.retry_after)
aiogram.utils.exceptions.RetryAfter: Flood control exceeded. Retry in 18 seconds.
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:14:50,594]  Task exception was never retrieved
future: <Task finished name='Task-440' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=RetryAfter('Flood control exceeded. Retry in 15 seconds.')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 78, in citizens_menu_handler
    await edit_msg.edit_reply_markup(keyboard)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2712, in edit_reply_markup
    return await self.bot.edit_message_reply_markup(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2541, in edit_message_reply_markup
    result = await self.request(api.Methods.EDIT_MESSAGE_REPLY_MARKUP, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 111, in check_result
    raise exceptions.RetryAfter(parameters.retry_after)
aiogram.utils.exceptions.RetryAfter: Flood control exceeded. Retry in 15 seconds.
base_events.py [LINE:1738] #ERROR    [2021-08-27 15:14:55,731]  Task exception was never retrieved
future: <Task finished name='Task-452' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=RetryAfter('Flood control exceeded. Retry in 10 seconds.')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/country_bot/handlers/other/citizens.py", line 106, in citizens_menu_handler
    edit_msg = await edit_msg.edit_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/types/message.py", line 2616, in edit_text
    return await self.bot.edit_message_text(
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/bot.py", line 2411, in edit_message_text
    result = await self.request(api.Methods.EDIT_MESSAGE_TEXT, payload)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/base.py", line 208, in request
    return await api.make_request(self.session, self.server, self.__token, method, data, files,
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 140, in make_request
    return check_result(method, response.content_type, response.status, await response.text())
  File "/usr/local/lib/python3.9/dist-packages/aiogram/bot/api.py", line 111, in check_result
    raise exceptions.RetryAfter(parameters.retry_after)
aiogram.utils.exceptions.RetryAfter: Flood control exceeded. Retry in 10 seconds.
^[[A    Traceback (most recent call last):
  File "/home/kingbot/app.py", line 4, in <module>
    from loader import dp
  File "/home/kingbot/loader.py", line 5, in <module>
    from data import config
  File "/home/kingbot/data/config.py", line 7, in <module>
    BOT_TOKEN = env.str("BOT_TOKEN")  # Забираем значение типа str
  File "/usr/local/lib/python3.9/dist-packages/environs/__init__.py", line 110, in method
    raise EnvError('Environment variable "{}" not set'.format(proxied_key or parsed_key))
environs.EnvError: Environment variable "BOT_TOKEN" not set
Traceback (most recent call last):
  File "/home/kingbot/app.py", line 4, in <module>
    from loader import dp
  File "/home/kingbot/loader.py", line 5, in <module>
    from data import config
  File "/home/kingbot/data/config.py", line 7, in <module>
    BOT_TOKEN = env.str("BOT_TOKEN")  # Забираем значение типа str
  File "/usr/local/lib/python3.9/dist-packages/environs/__init__.py", line 110, in method
    raise EnvError('Environment variable "{}" not set'.format(proxied_key or parsed_key))
environs.EnvError: Environment variable "BOT_TOKEN" not set
executor.py [LINE:362] #INFO     [2021-11-23 14:40:11,890]  Bot: Kings of Empire [@KingsEmpiresBot]
executor.py [LINE:358] #WARNING  [2021-11-23 14:40:12,945]  Updates were skipped successfully.
dispatcher.py [LINE:360] #INFO     [2021-11-23 14:40:12,996]  Start polling.
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 14:51:47,976]  Task exception was never retrieved
future: <Task finished name='Task-326' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'message_id'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/campaign.py", line 254, in capture_handler
    if campaign_msg.message_id == message.reply_to_message.message_id:
AttributeError: 'NoneType' object has no attribute 'message_id'
200 0
1
base_events.py [LINE:1738] #ERROR    [2021-11-23 15:09:50,674]  Task exception was never retrieved
future: <Task finished name='Task-1195' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 128, in buildings_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 592, in create_unlocked_buildings_keyboard
    for btn in list_paginated_buttons[page]:
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 15:10:39,448]  Task exception was never retrieved
future: <Task finished name='Task-1238' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 128, in buildings_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 592, in create_unlocked_buildings_keyboard
    for btn in list_paginated_buttons[page]:
IndexError: list index out of range
20 1
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 15:20:13,729]  Task exception was never retrieved
future: <Task finished name='Task-1717' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 100, in reply_menu_handler
    await unit_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-23 15:20:41,884]  Task exception was never retrieved
future: <Task finished name='Task-1741' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 144, in reply_menu_handler
    if units.units_type[unit_num] is None:
IndexError: list index out of range
20 0
20 0
20 0
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 16:01:38,445]  Task exception was never retrieved
future: <Task finished name='Task-4145' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/market.py", line 111, in products_list_handler
    await market_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 16:08:00,191]  Task exception was never retrieved
future: <Task finished name='Task-4434' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_reply_markup'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 259, in progress_handler
    await townhall_msg.edit_reply_markup(
AttributeError: 'NoneType' object has no attribute 'edit_reply_markup'
20 0
0 [-1, -1, 5] [8, 6, 5]
2 [-1, -1, 5] [8, 6, 5]
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 16:15:35,048]  Task exception was never retrieved
future: <Task finished name='Task-4930' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 127, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
2 [-1, -1, 5] [8, 6, 5]
40 10
20 16
20 13
20 3
20 2
20 0
40 0
40 0
2 [-1, -1, 5] [8, 6, 5]
20 0
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:08:47,347]  Task exception was never retrieved
future: <Task finished name='Task-6221' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 127, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:08:51,354]  Task exception was never retrieved
future: <Task finished name='Task-6224' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 127, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:25:42,013]  Task exception was never retrieved
future: <Task finished name='Task-6452' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:25:51,694]  Task exception was never retrieved
future: <Task finished name='Task-6462' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:26:03,132]  Task exception was never retrieved
future: <Task finished name='Task-6473' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:26:13,891]  Task exception was never retrieved
future: <Task finished name='Task-6490' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:26:26,249]  Task exception was never retrieved
future: <Task finished name='Task-6493' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:26:36,735]  Task exception was never retrieved
future: <Task finished name='Task-6516' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:26:58,240]  Task exception was never retrieved
future: <Task finished name='Task-6545' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:27:02,005]  Task exception was never retrieved
future: <Task finished name='Task-6548' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:27:34,048]  Task exception was never retrieved
future: <Task finished name='Task-6588' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:28:02,550]  Task exception was never retrieved
future: <Task finished name='Task-6592' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:28:22,656]  Task exception was never retrieved
future: <Task finished name='Task-6608' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:29:32,364]  Task exception was never retrieved
future: <Task finished name='Task-6614' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:30:03,565]  Task exception was never retrieved
future: <Task finished name='Task-6648' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:34:04,073]  Task exception was never retrieved
future: <Task finished name='Task-6710' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:34:07,893]  Task exception was never retrieved
future: <Task finished name='Task-6713' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 127, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:34:59,820]  Task exception was never retrieved
future: <Task finished name='Task-6734' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:35:05,115]  Task exception was never retrieved
future: <Task finished name='Task-6745' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 17:39:15,763]  Task exception was never retrieved
future: <Task finished name='Task-6875' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_reply_markup'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/campaign.py", line 140, in capture_handler
    await campaign_msg.edit_reply_markup(
AttributeError: 'NoneType' object has no attribute 'edit_reply_markup'
base_events.py [LINE:1738] #ERROR    [2021-11-23 18:01:49,357]  Task exception was never retrieved
future: <Task finished name='Task-6975' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 18:03:15,558]  Task exception was never retrieved
future: <Task finished name='Task-6982' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 18:03:35,918]  Task exception was never retrieved
future: <Task finished name='Task-7009' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 21:49:06,973]  Task exception was never retrieved
future: <Task finished name='Task-7772' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-23 21:49:33,282]  Task exception was never retrieved
future: <Task finished name='Task-7776' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 01:26:47,142]  Task exception was never retrieved
future: <Task finished name='Task-8616' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 01:26:50,132]  Task exception was never retrieved
future: <Task finished name='Task-8625' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_reply_markup'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 113, in buildings_handler
    await buildings_msg.edit_reply_markup(
AttributeError: 'NoneType' object has no attribute 'edit_reply_markup'
base_events.py [LINE:1738] #ERROR    [2021-11-24 01:27:18,224]  Task exception was never retrieved
future: <Task finished name='Task-8660' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 01:27:19,727]  Task exception was never retrieved
future: <Task finished name='Task-8663' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 01:27:48,737]  Task exception was never retrieved
future: <Task finished name='Task-8672' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
80 0
240 0
60 0
140 119
120 112
120 106
2 [8, 1, 5] [8, 6, 5]
120 0
200 0
base_events.py [LINE:1738] #ERROR    [2021-11-24 02:42:28,280]  Task exception was never retrieved
future: <Task finished name='Task-9809' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 144, in reply_menu_handler
    if units.units_type[unit_num] is None:
IndexError: list index out of range
600 0
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:36:09,600]  Task exception was never retrieved
future: <Task finished name='Task-10514' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:36:34,383]  Task exception was never retrieved
future: <Task finished name='Task-10571' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
1
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:47:52,744]  Task exception was never retrieved
future: <Task finished name='Task-11018' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 128, in buildings_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 592, in create_unlocked_buildings_keyboard
    for btn in list_paginated_buttons[page]:
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:57:50,649]  Task exception was never retrieved
future: <Task finished name='Task-11410' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 128, in buildings_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 592, in create_unlocked_buildings_keyboard
    for btn in list_paginated_buttons[page]:
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:58:03,829]  Task exception was never retrieved
future: <Task finished name='Task-11470' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 03:59:53,890]  Task exception was never retrieved
future: <Task finished name='Task-11678' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=TypeError("'>' not supported between instances of 'NoneType' and 'int'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/clan.py", line 59, in territory_handler
    keyboard = kb_constructor.StandardKeyboard(user_id=user_id).create_clan_keyboard()
  File "/home/kingbot/utils/classes/kb_constructor.py", line 106, in create_clan_keyboard
    elif clan_member.clan_units > 0:
TypeError: '>' not supported between instances of 'NoneType' and 'int'
base_events.py [LINE:1738] #ERROR    [2021-11-24 04:00:28,224]  Task exception was never retrieved
future: <Task finished name='Task-11716' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 04:08:15,149]  Task exception was never retrieved
future: <Task finished name='Task-12079' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=TypeError('list indices must be integers or slices, not str')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/buildings.py", line 136, in buildings_handler
    building = base_buildings[buildings.buildings[position]]
TypeError: list indices must be integers or slices, not str
base_events.py [LINE:1738] #ERROR    [2021-11-24 07:16:58,769]  Task exception was never retrieved
future: <Task finished name='Task-14411' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 144, in reply_menu_handler
    if units.units_type[unit_num] is None:
IndexError: list index out of range
400 384
400 344
100 78
360 343
1000 562
360 339
580 559
800 728
560 529
760 145
540 0
160 156
160 92
120 99
120 75
80 77
80 60
80 0
40 0
base_events.py [LINE:1738] #ERROR    [2021-11-24 07:43:27,735]  Task exception was never retrieved
future: <Task finished name='Task-15195' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
360 187
base_events.py [LINE:1738] #ERROR    [2021-11-24 07:51:58,264]  Task exception was never retrieved
future: <Task finished name='Task-15674' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 93, in townhall_back_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
200 0
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:10:40,910]  Task exception was never retrieved
future: <Task finished name='Task-16030' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 138, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:10:43,519]  Task exception was never retrieved
future: <Task finished name='Task-16033' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=AttributeError("'NoneType' object has no attribute 'edit_text'")>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 138, in townhall_menu_handler
    await townhall_msg.edit_text(
AttributeError: 'NoneType' object has no attribute 'edit_text'
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:11:28,909]  Task exception was never retrieved
future: <Task finished name='Task-16060' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 144, in reply_menu_handler
    if units.units_type[unit_num] is None:
IndexError: list index out of range
380 336
340 0
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:31:45,261]  Task exception was never retrieved
future: <Task finished name='Task-16326' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 259, in process_update
    return await self.message_handlers.notify(update.message)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/units.py", line 144, in reply_menu_handler
    if units.units_type[unit_num] is None:
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:57:08,151]  Task exception was never retrieved
future: <Task finished name='Task-16481' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
base_events.py [LINE:1738] #ERROR    [2021-11-24 08:59:04,900]  Task exception was never retrieved
future: <Task finished name='Task-16597' coro=<Dispatcher._process_polling_updates() done, defined at /usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py:409> exception=IndexError('list index out of range')>
Traceback (most recent call last):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 417, in _process_polling_updates
    for responses in itertools.chain.from_iterable(await self.process_updates(updates, fast)):
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 238, in process_updates
    return await asyncio.gather(*tasks)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/dispatcher.py", line 286, in process_update
    return await self.callback_query_handlers.notify(update.callback_query)
  File "/usr/local/lib/python3.9/dist-packages/aiogram/dispatcher/handler.py", line 116, in notify
    response = await handler_obj.handler(*args, **partial_data)
  File "/home/kingbot/handlers/other/townhall.py", line 123, in townhall_menu_handler
    keyboard = kb_constructor.PaginationKeyboard(
  File "/home/kingbot/utils/classes/kb_constructor.py", line 1045, in create_progress_keyboard
    next_age_name = list_ages[list_ages.index(townhall.age)+1]
IndexError: list index out of range
200 0
